(()=>{var e={};e.id=987,e.ids=[987],e.modules={176:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6444,23)),Promise.resolve().then(r.t.bind(r,6042,23)),Promise.resolve().then(r.t.bind(r,8170,23)),Promise.resolve().then(r.t.bind(r,9477,23)),Promise.resolve().then(r.t.bind(r,9345,23)),Promise.resolve().then(r.t.bind(r,2089,23)),Promise.resolve().then(r.t.bind(r,6577,23)),Promise.resolve().then(r.t.bind(r,1307,23))},833:(e,t,r)=>{Promise.resolve().then(r.bind(r,1900))},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1900:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/mhmdal/Projects/polling-next/polling-next/app/poll/create/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/mhmdal/Projects/polling-next/polling-next/app/poll/create/page.tsx","default")},2704:()=>{},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3821:(e,t,r)=>{Promise.resolve().then(r.bind(r,6862))},3873:e=>{"use strict";e.exports=require("path")},3985:(e,t,r)=>{Promise.resolve().then(r.bind(r,4718))},4708:(e,t,r)=>{"use strict";r.d(t,{x:()=>o});let o={getUserId:()=>"",hasCreatedPolls:()=>!1,setHasCreatedPolls(){},clearHasCreatedPolls(){}}},4718:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var o=r(687),s=r(8665),n=r(4708),l=r(3210);function i(){let[e,t]=(0,l.useState)(""),[r,i]=(0,l.useState)("1"),[a,d]=(0,l.useState)({name:"",votes:0,id:"0",isChecked:!1}),[c,m]=(0,l.useState)([]),[u,p]=(0,l.useState)(""),[h,x]=(0,l.useState)("success"),[g,f]=(0,l.useState)(null),[b,v]=(0,l.useState)(!1),[y,j]=(0,l.useState)(""),P=(e,t="success")=>{p(e),x(t),setTimeout(()=>{p("")},5e3)},w=(e,t)=>{navigator.clipboard.writeText(e).then(()=>{j(`${t} copied to clipboard!`),setTimeout(()=>j(""),2e3)}).catch(()=>{j("Failed to copy to clipboard"),setTimeout(()=>j(""),2e3)})},N=()=>{a&&a.name.trim()&&(m([...c,a]),d({name:"",votes:0,id:"0",isChecked:!1}))},C=async()=>{if(!(!e||c.some(e=>!e.name.trim()))){v(!0);try{let o=await (0,s.Gi)({question:e,maxResponseOptions:r,options:c});console.log("Created poll:",o),f(o),t(""),d({name:"",votes:0,id:"0",isChecked:!1}),i("1"),m([]),n.x.setHasCreatedPolls()}catch(e){console.error(e),P("Failed to create poll. Please try again.","error")}finally{v(!1)}}};return(0,o.jsxs)("div",{className:"min-h-screen py-8",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundAttachment:"fixed"},children:[(0,o.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,o.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border p-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Create a New Poll"}),(0,o.jsxs)("div",{className:"space-y-6",children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Poll Question *"}),(0,o.jsx)("input",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors",placeholder:"What would you like to ask?",value:e,onChange:e=>t(e.target.value)})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Selected Options"}),(0,o.jsx)("input",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors",placeholder:"1",type:"number",min:1,value:r,onChange:e=>i(e.target.value)}),(0,o.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"How many options can each user select?"})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Poll Options"}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("input",{className:"flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors",placeholder:"Enter an option...",value:a.name,onChange:e=>d({...a,name:e.target.value}),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),N())}}),(0,o.jsx)("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors font-medium",onClick:N,disabled:!a.name.trim(),children:"Add"})]})]}),c.length>0&&(0,o.jsxs)("div",{children:[(0,o.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Poll Options (",c.length,")"]}),(0,o.jsx)("div",{className:"space-y-2",children:c.map((e,t)=>(0,o.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border",children:[(0,o.jsxs)("span",{className:"text-gray-900",children:[(0,o.jsxs)("span",{className:"text-gray-500 font-medium",children:[t+1,"."]})," ",e.name]}),(0,o.jsx)("button",{className:"text-red-500 hover:text-red-700 p-1 rounded",onClick:()=>m(c.filter((e,r)=>r!==t)),title:"Remove option",children:"âœ•"})]},t))})]}),0===c.length&&(0,o.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,o.jsx)("p",{children:"No options added yet. Add at least two options to create your poll."})})]}),(0,o.jsxs)("div",{className:"mt-8 pt-6 border-t",children:[(0,o.jsx)("button",{className:"w-full bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors font-medium text-lg disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",onClick:C,disabled:!e.trim()||c.length<2||b,children:b?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Poll..."]}):"Create Poll"}),(!e.trim()||c.length<2)&&(0,o.jsx)("p",{className:"text-sm text-gray-500 text-center mt-2",children:"Please add a question and at least 2 options"})]}),u&&"error"===h&&(0,o.jsx)("div",{className:"mt-4 p-4 rounded-lg border bg-red-50 border-red-200",children:(0,o.jsx)("p",{className:"text-center font-medium text-red-800",children:u})}),g&&(0,o.jsx)("div",{className:"mt-4 p-6 rounded-lg bg-gradient-to-r from-green-50 to-blue-50 border border-green-200",children:(0,o.jsxs)("div",{className:"text-center",children:[(0,o.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"\uD83C\uDF89 Poll Created Successfully!"}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Share this URL with others to collect responses:"}),(0,o.jsxs)("div",{className:"flex items-center justify-center gap-2 bg-white rounded-lg p-4 border shadow-sm",children:[(0,o.jsx)("code",{className:"text-sm font-mono text-gray-700 flex-1 min-w-0 truncate",children:`${window.location.origin}/poll/submit/${g}`}),(0,o.jsx)("button",{onClick:()=>w(`${window.location.origin}/poll/submit/${g}`,"Poll URL"),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded font-medium transition-colors whitespace-nowrap",title:"Copy Poll URL",children:"Copy URL"})]})]}),(0,o.jsxs)("div",{className:"mt-4 flex gap-3 justify-center",children:[(0,o.jsx)("button",{onClick:()=>window.location.href=`/poll/results/${g}`,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors font-medium",children:"Show Responses"}),(0,o.jsx)("button",{onClick:()=>f(null),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors font-medium",children:"Create Another Poll"})]})]})})]})}),y&&(0,o.jsx)("div",{className:"fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-in slide-in-from-bottom-2 fade-in duration-200",children:(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),y]})})]})}function a(){return(0,o.jsx)(i,{})}},5396:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var o=r(687);function s({children:e}){return(0,o.jsx)("div",{children:e})}},6055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var o=r(1658);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,o.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]},6862:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});let o=(0,r(2907).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/home/mhmdal/Projects/polling-next/polling-next/app/poll/layout.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/home/mhmdal/Projects/polling-next/polling-next/app/poll/layout.tsx","default")},7767:()=>{},8014:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>d,metadata:()=>a});var o=r(7413),s=r(6389),n=r.n(s),l=r(1189),i=r.n(l);r(2704);let a={title:"PollApp - Create and Share Polls Instantly",description:"Create beautiful polls, collect responses, and view real-time results. Simple, fast, and free."};function d({children:e}){return(0,o.jsx)("html",{lang:"en",children:(0,o.jsx)("body",{className:`${n().variable} ${i().variable} antialiased`,children:e})})}},8177:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>d});var o=r(5239),s=r(8088),n=r(8170),l=r.n(n),i=r(893),a={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(a[e]=()=>i[e]);r.d(t,a);let d={children:["",{children:["poll",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1900)),"/home/mhmdal/Projects/polling-next/polling-next/app/poll/create/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,6862)),"/home/mhmdal/Projects/polling-next/polling-next/app/poll/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,8014)),"/home/mhmdal/Projects/polling-next/polling-next/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,7398,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,9999,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,5284,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,6055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,c=["/home/mhmdal/Projects/polling-next/polling-next/app/poll/create/page.tsx"],m={require:r,loadChunk:()=>Promise.resolve()},u=new o.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/poll/create/page",pathname:"/poll/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8665:(e,t,r)=>{"use strict";r.d(t,{Gi:()=>n,gU:()=>l,AF:()=>i,Ps:()=>a,Oi:()=>d});var o=r(4708);let s="http://34.18.142.59:8080";async function n(e){let t=await fetch(`${s}/createPoll`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,createdBy:o.x.getUserId()})});if(!t.ok)throw Error("Failed to create poll");return await t.json()}async function l(e){let t=await fetch(`${s}/getPoll/${e}/${o.x.getUserId()}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to create poll");return await t.json()}async function i(e){let t=await fetch(`${s}/getPollResults/${e}`,{method:"GET",headers:{"Content-Type":"application/json"}});return await t.json()}async function a(){let e=await fetch(`${s}/getPolls/${o.x.getUserId()}`,{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to create poll");return await e.json()}async function d(e){let t=await fetch(`${s}/submitPoll/${o.x.getUserId()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to submit poll");return await t.json()}},9085:(e,t,r)=>{Promise.resolve().then(r.bind(r,5396))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9519:()=>{},9551:e=>{"use strict";e.exports=require("url")},9904:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,6346,23)),Promise.resolve().then(r.t.bind(r,7924,23)),Promise.resolve().then(r.t.bind(r,5656,23)),Promise.resolve().then(r.t.bind(r,99,23)),Promise.resolve().then(r.t.bind(r,8243,23)),Promise.resolve().then(r.t.bind(r,8827,23)),Promise.resolve().then(r.t.bind(r,2763,23)),Promise.resolve().then(r.t.bind(r,7173,23))}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),o=t.X(0,[447,985,658],()=>r(8177));module.exports=o})();