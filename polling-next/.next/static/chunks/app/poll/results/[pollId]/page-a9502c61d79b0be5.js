(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[504],{3018:(e,t,s)=>{Promise.resolve().then(s.bind(s,5086))},5086:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>c});var l=s(5155),a=s(8279),o=s(8350),r=s(2115);function n(e){let{pollId:t}=e,[s,n]=(0,r.useState)(null),[i,c]=(0,r.useState)(""),[d,m]=(0,r.useState)(!0),[u,x]=(0,r.useState)(""),[h,p]=(0,r.useState)(!1),g=e=>{c(e),setTimeout(()=>{c("")},3e3)},b=(e,t)=>{navigator.clipboard.writeText(e).then(()=>{x("".concat(t," copied to clipboard!")),setTimeout(()=>x(""),2e3)}).catch(()=>{x("Failed to copy to clipboard"),setTimeout(()=>x(""),2e3)})};if((0,r.useEffect)(()=>{let e=!0,s=async function(){let s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{let s=await (0,a.AF)(t);e&&n(s)}catch(t){e&&g("Failed to load poll results.")}finally{s&&e&&m(!1)}};s(!0);let l=setInterval(()=>{e&&s(!1)},1e4);return()=>{e=!1,clearInterval(l)}},[t]),(0,r.useEffect)(()=>{p(o.x.hasCreatedPolls())},[]),d)return(0,l.jsx)("div",{className:"min-h-screen py-8",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundAttachment:"fixed"},children:(0,l.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,l.jsx)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border p-8",children:(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,l.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-600 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,l.jsx)("p",{className:"text-gray-600",children:"Loading poll results..."})]})})})});if(!(null==s?void 0:s.poll))return(0,l.jsx)("div",{className:"min-h-screen py-8",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundAttachment:"fixed"},children:(0,l.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,l.jsx)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border p-8",children:(0,l.jsxs)("div",{className:"text-center py-12",children:[(0,l.jsx)("div",{className:"text-6xl mb-4",children:"❌"}),(0,l.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Poll not found"}),(0,l.jsx)("p",{className:"text-gray-600",children:"The poll you're looking for doesn't exist or has been removed."})]})})})});let f=null==s?void 0:s.poll.options.reduce((e,t)=>e+(t.votes||0),0),v=(null==s?void 0:s.submissionCount)||0;return(0,l.jsxs)("div",{className:"min-h-screen py-8",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundAttachment:"fixed"},children:[(0,l.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,l.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border p-8",children:[(0,l.jsxs)("div",{className:"text-center mb-8",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:null==s?void 0:s.poll.question}),(0,l.jsx)("p",{className:"text-gray-600",children:"Poll Results"}),(0,l.jsxs)("div",{className:"flex items-center justify-center gap-4 mt-4 text-sm text-gray-500",children:[(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),v," submissions"]}),(0,l.jsxs)("span",{className:"flex items-center gap-1",children:[(0,l.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),f," total votes"]})]})]}),(0,l.jsx)("div",{className:"space-y-4 mb-8",children:null==s?void 0:s.poll.options.map((e,t)=>{let a=f>0?e.votes/f*100:0,o=e.votes>0&&e.votes===Math.max(...null==s?void 0:s.poll.options.map(e=>e.votes));return(0,l.jsxs)("div",{className:"relative p-4 rounded-lg border-2 transition-all ".concat(o&&f>0?"border-green-300 bg-green-50":"border-gray-200 bg-gray-50"),children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,l.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[o&&f>0&&(0,l.jsx)("svg",{className:"w-5 h-5 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),(0,l.jsxs)("span",{className:"text-sm font-medium text-gray-600",children:[e.votes," votes (",a.toFixed(1),"%)"]})]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3",children:(0,l.jsx)("div",{className:"h-3 rounded-full transition-all duration-500 ".concat(o&&f>0?"bg-green-500":"bg-blue-500"),style:{width:"".concat(a,"%")}})})]},e.id||t)})}),(0,l.jsx)("div",{className:"border-t pt-6",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Share this poll"}),(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2 bg-gray-50 rounded-lg p-4 border",children:[(0,l.jsx)("code",{className:"text-sm font-mono text-gray-700 flex-1 min-w-0 truncate",children:"".concat(window.location.origin,"/poll/submit/").concat(null==s?void 0:s.poll.id)}),(0,l.jsx)("button",{onClick:()=>b("".concat(window.location.origin,"/poll/submit/").concat(null==s?void 0:s.poll.id),"Poll link"),className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded font-medium transition-colors whitespace-nowrap",title:"Copy poll link",children:"Copy Link"})]})]})}),h&&(0,l.jsx)("div",{className:"mt-8 pt-6 border-t text-center",children:(0,l.jsx)("button",{onClick:()=>window.location.href="/poll",className:"px-6 py-3 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors font-medium",children:"← Back to My Polls"})}),i&&(0,l.jsx)("div",{className:"mt-6 p-4 rounded-lg bg-red-50 border border-red-200",children:(0,l.jsx)("p",{className:"text-center font-medium text-red-800",children:i})})]})}),u&&(0,l.jsx)("div",{className:"fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-in slide-in-from-bottom-2 fade-in duration-200",children:(0,l.jsxs)("div",{className:"flex items-center gap-2",children:[(0,l.jsx)("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),u]})})]})}var i=s(5695);function c(){let e=Number((0,i.useParams)().pollId);return(0,l.jsx)(n,{pollId:e})}},5695:(e,t,s)=>{"use strict";var l=s(8999);s.o(l,"useParams")&&s.d(t,{useParams:function(){return l.useParams}}),s.o(l,"useRouter")&&s.d(t,{useRouter:function(){return l.useRouter}})},8279:(e,t,s)=>{"use strict";s.d(t,{Gi:()=>o,gU:()=>r,AF:()=>n,Ps:()=>i,Oi:()=>c});var l=s(8350);let a="http://34.18.142.59:8080";async function o(e){let t=await fetch("".concat(a,"/createPoll"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,createdBy:l.x.getUserId()})});if(!t.ok)throw Error("Failed to create poll");return await t.json()}async function r(e){let t=await fetch("".concat(a,"/getPoll/").concat(e,"/").concat(l.x.getUserId()),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to create poll");return await t.json()}async function n(e){let t=await fetch("".concat(a,"/getPollResults/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});return await t.json()}async function i(){let e=await fetch("".concat(a,"/getPolls/").concat(l.x.getUserId()),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to create poll");return await e.json()}async function c(e){let t=await fetch("".concat(a,"/submitPoll/").concat(l.x.getUserId()),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to submit poll");return await t.json()}},8350:(e,t,s)=>{"use strict";s.d(t,{x:()=>l});let l={getUserId(){let e=localStorage.getItem("poll_user_id");return e||(e=crypto.randomUUID(),localStorage.setItem("poll_user_id",e)),e},hasCreatedPolls:()=>"true"===localStorage.getItem("hasCreatedPolls"),setHasCreatedPolls(){localStorage.setItem("hasCreatedPolls","true")},clearHasCreatedPolls(){localStorage.removeItem("hasCreatedPolls")}}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(3018)),_N_E=e.O()}]);