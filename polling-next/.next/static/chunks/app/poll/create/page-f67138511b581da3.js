(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[987],{495:(e,t,o)=>{Promise.resolve().then(o.bind(o,6045))},6045:(e,t,o)=>{"use strict";o.r(t),o.d(t,{default:()=>i});var s=o(5155),r=o(8279),a=o(8350),l=o(2115);function n(){let[e,t]=(0,l.useState)(""),[o,n]=(0,l.useState)("1"),[i,c]=(0,l.useState)({name:"",votes:0,id:"0",isChecked:!1}),[d,u]=(0,l.useState)([]),[m,g]=(0,l.useState)(""),[h,x]=(0,l.useState)("success"),[p,f]=(0,l.useState)(null),[b,y]=(0,l.useState)(!1),[j,w]=(0,l.useState)(""),v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";g(e),x(t),setTimeout(()=>{g("")},5e3)},N=(e,t)=>{navigator.clipboard.writeText(e).then(()=>{w("".concat(t," copied to clipboard!")),setTimeout(()=>w(""),2e3)}).catch(()=>{w("Failed to copy to clipboard"),setTimeout(()=>w(""),2e3)})},C=()=>{i&&i.name.trim()&&(u([...d,i]),c({name:"",votes:0,id:"0",isChecked:!1}))},k=async()=>{if(!(!e||d.some(e=>!e.name.trim()))){y(!0);try{let s=await (0,r.Gi)({question:e,maxResponseOptions:o,options:d});console.log("Created poll:",s),f(s),t(""),c({name:"",votes:0,id:"0",isChecked:!1}),n("1"),u([]),a.x.setHasCreatedPolls()}catch(e){console.error(e),v("Failed to create poll. Please try again.","error")}finally{y(!1)}}};return(0,s.jsxs)("div",{className:"min-h-screen py-8",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundAttachment:"fixed"},children:[(0,s.jsx)("div",{className:"max-w-2xl mx-auto px-4",children:(0,s.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border p-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-8 text-center",children:"Create a New Poll"}),(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Poll Question *"}),(0,s.jsx)("input",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors",placeholder:"What would you like to ask?",value:e,onChange:e=>t(e.target.value)})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Maximum Selected Options"}),(0,s.jsx)("input",{className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors",placeholder:"1",type:"number",min:1,value:o,onChange:e=>n(e.target.value)}),(0,s.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"How many options can each user select?"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Poll Options"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("input",{className:"flex-1 p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition-colors",placeholder:"Enter an option...",value:i.name,onChange:e=>c({...i,name:e.target.value}),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),C())}}),(0,s.jsx)("button",{className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors font-medium",onClick:C,disabled:!i.name.trim(),children:"Add"})]})]}),d.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsxs)("h3",{className:"text-sm font-medium text-gray-700 mb-3",children:["Poll Options (",d.length,")"]}),(0,s.jsx)("div",{className:"space-y-2",children:d.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border",children:[(0,s.jsxs)("span",{className:"text-gray-900",children:[(0,s.jsxs)("span",{className:"text-gray-500 font-medium",children:[t+1,"."]})," ",e.name]}),(0,s.jsx)("button",{className:"text-red-500 hover:text-red-700 p-1 rounded",onClick:()=>u(d.filter((e,o)=>o!==t)),title:"Remove option",children:"âœ•"})]},t))})]}),0===d.length&&(0,s.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,s.jsx)("p",{children:"No options added yet. Add at least two options to create your poll."})})]}),(0,s.jsxs)("div",{className:"mt-8 pt-6 border-t",children:[(0,s.jsx)("button",{className:"w-full bg-green-600 text-white py-3 px-6 rounded-lg hover:bg-green-700 focus:ring-2 focus:ring-green-500 focus:ring-offset-2 transition-colors font-medium text-lg disabled:bg-gray-300 disabled:cursor-not-allowed flex items-center justify-center gap-2",onClick:k,disabled:!e.trim()||d.length<2||b,children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Poll..."]}):"Create Poll"}),(!e.trim()||d.length<2)&&(0,s.jsx)("p",{className:"text-sm text-gray-500 text-center mt-2",children:"Please add a question and at least 2 options"})]}),m&&"error"===h&&(0,s.jsx)("div",{className:"mt-4 p-4 rounded-lg border bg-red-50 border-red-200",children:(0,s.jsx)("p",{className:"text-center font-medium text-red-800",children:m})}),p&&(0,s.jsx)("div",{className:"mt-4 p-6 rounded-lg bg-gradient-to-r from-green-50 to-blue-50 border border-green-200",children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h3",{className:"text-lg font-semibold text-green-800 mb-4",children:"\uD83C\uDF89 Poll Created Successfully!"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-sm text-gray-600 mb-3",children:"Share this URL with others to collect responses:"}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 bg-white rounded-lg p-4 border shadow-sm",children:[(0,s.jsx)("code",{className:"text-sm font-mono text-gray-700 flex-1 min-w-0 truncate",children:"".concat(window.location.origin,"/poll/submit/").concat(p)}),(0,s.jsx)("button",{onClick:()=>N("".concat(window.location.origin,"/poll/submit/").concat(p),"Poll URL"),className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded font-medium transition-colors whitespace-nowrap",title:"Copy Poll URL",children:"Copy URL"})]})]}),(0,s.jsxs)("div",{className:"mt-4 flex gap-3 justify-center",children:[(0,s.jsx)("button",{onClick:()=>window.location.href="/poll/results/".concat(p),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors font-medium",children:"Show Responses"}),(0,s.jsx)("button",{onClick:()=>f(null),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors font-medium",children:"Create Another Poll"})]})]})})]})}),j&&(0,s.jsx)("div",{className:"fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-in slide-in-from-bottom-2 fade-in duration-200",children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),j]})})]})}function i(){return(0,s.jsx)(n,{})}},8279:(e,t,o)=>{"use strict";o.d(t,{Gi:()=>a,gU:()=>l,AF:()=>n,Ps:()=>i,Oi:()=>c});var s=o(8350);let r="http://34.18.142.59:8080";async function a(e){let t=await fetch("".concat(r,"/createPoll"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,createdBy:s.x.getUserId()})});if(!t.ok)throw Error("Failed to create poll");return await t.json()}async function l(e){let t=await fetch("".concat(r,"/getPoll/").concat(e,"/").concat(s.x.getUserId()),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to create poll");return await t.json()}async function n(e){let t=await fetch("".concat(r,"/getPollResults/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});return await t.json()}async function i(){let e=await fetch("".concat(r,"/getPolls/").concat(s.x.getUserId()),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to create poll");return await e.json()}async function c(e){let t=await fetch("".concat(r,"/submitPoll/").concat(s.x.getUserId()),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to submit poll");return await t.json()}},8350:(e,t,o)=>{"use strict";o.d(t,{x:()=>s});let s={getUserId(){let e=localStorage.getItem("poll_user_id");return e||(e=crypto.randomUUID(),localStorage.setItem("poll_user_id",e)),e},hasCreatedPolls:()=>"true"===localStorage.getItem("hasCreatedPolls"),setHasCreatedPolls(){localStorage.setItem("hasCreatedPolls","true")},clearHasCreatedPolls(){localStorage.removeItem("hasCreatedPolls")}}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(495)),_N_E=e.O()}]);