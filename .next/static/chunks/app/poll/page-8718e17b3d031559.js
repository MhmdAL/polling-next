(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302],{1214:(e,t,s)=>{Promise.resolve().then(s.bind(s,1410))},1410:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var o=s(5155),r=s(8279),a=s(5695),l=s(2115);function n(){let[e,t]=(0,l.useState)([]),[s,n]=(0,l.useState)(""),[i,c]=(0,l.useState)(!0),[d,u]=(0,l.useState)(""),h=e=>{n(e),setTimeout(()=>{n("")},3e3)};(0,l.useEffect)(()=>{let e=async()=>{try{let e=await (0,r.Ps)();t(e)}catch(e){h("Failed to load polls.")}finally{c(!1)}};e();let s=setInterval(()=>{e()},5e3);return()=>clearInterval(s)},[]);let m=(0,a.useRouter)(),x=(e,t)=>{navigator.clipboard.writeText(e).then(()=>{u("".concat(t," copied to clipboard!")),setTimeout(()=>u(""),2e3)}).catch(()=>{u("Failed to copy to clipboard"),setTimeout(()=>u(""),2e3)})};return(0,o.jsxs)("div",{className:"min-h-screen py-8",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",backgroundAttachment:"fixed"},children:[(0,o.jsx)("div",{className:"max-w-4xl mx-auto px-4",children:(0,o.jsxs)("div",{className:"bg-white/95 backdrop-blur-sm rounded-xl shadow-lg border p-8",children:[(0,o.jsxs)("div",{className:"text-center mb-8",children:[(0,o.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"My Polls"}),(0,o.jsx)("p",{className:"text-gray-600",children:"Manage and view your created polls"})]}),i?(0,o.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,o.jsxs)("svg",{className:"animate-spin h-8 w-8 text-blue-600 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,o.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,o.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),(0,o.jsx)("p",{className:"text-gray-600",children:"Loading polls..."})]}):0===e.length?(0,o.jsxs)("div",{className:"text-center py-12",children:[(0,o.jsx)("div",{className:"text-6xl mb-4",children:"\uD83D\uDCCA"}),(0,o.jsx)("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No polls created yet"}),(0,o.jsx)("p",{className:"text-gray-600 mb-6",children:"You haven't created any polls yet. Start by creating your first poll!"}),(0,o.jsx)("button",{onClick:()=>window.location.href="/poll/create",className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors font-medium",children:"Create Your First Poll"})]}):(0,o.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:e.map((e,t)=>{var s;return(0,o.jsxs)("div",{className:"group bg-white border border-gray-200 rounded-xl p-6 hover:shadow-lg hover:border-blue-300 transition-all duration-200",children:[(0,o.jsx)("div",{className:"flex items-start justify-between mb-4",children:(0,o.jsxs)("div",{className:"flex-1",children:[(0,o.jsx)("h3",{className:"font-semibold text-gray-900 mb-2 line-clamp-2",children:e.question}),(0,o.jsxs)("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[(0,o.jsxs)("span",{className:"flex items-center gap-1",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),(null==(s=e.options)?void 0:s.length)||0," options"]}),(0,o.jsxs)("span",{className:"flex items-center gap-1",children:[(0,o.jsx)("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),e.submissionCount||0," submissions"]})]})]})}),(0,o.jsxs)("div",{className:"flex gap-2",children:[(0,o.jsx)("button",{onClick:()=>m.push("/poll/results/".concat(e.id)),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors font-medium text-sm",children:"View Results"}),(0,o.jsx)("button",{onClick:t=>{t.stopPropagation(),x("".concat(window.location.origin,"/poll/submit/").concat(e.id),"Share link")},className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 focus:ring-2 focus:ring-gray-500 focus:ring-offset-2 transition-colors font-medium text-sm",title:"Copy share link",children:"Share"})]})]},e.id||t)})}),s&&(0,o.jsx)("div",{className:"mt-6 p-4 rounded-lg bg-red-50 border border-red-200",children:(0,o.jsx)("p",{className:"text-center font-medium text-red-800",children:s})}),e.length>0&&(0,o.jsx)("div",{className:"mt-8 pt-6 border-t text-center",children:(0,o.jsx)("button",{onClick:()=>window.location.href="/poll/create",className:"px-8 py-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 font-medium shadow-md hover:shadow-lg",children:"Create Another Poll"})})]})}),d&&(0,o.jsx)("div",{className:"fixed bottom-4 right-4 bg-gray-800 text-white px-4 py-2 rounded-lg shadow-lg z-50 animate-in slide-in-from-bottom-2 fade-in duration-200",children:(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)("svg",{className:"w-4 h-4 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),d]})})]})}function i(){return(0,o.jsx)(n,{})}},5695:(e,t,s)=>{"use strict";var o=s(8999);s.o(o,"useParams")&&s.d(t,{useParams:function(){return o.useParams}}),s.o(o,"useRouter")&&s.d(t,{useRouter:function(){return o.useRouter}})},8279:(e,t,s)=>{"use strict";s.d(t,{Gi:()=>a,gU:()=>l,AF:()=>n,Ps:()=>i,Oi:()=>c});var o=s(8350);let r="http://34.18.142.59:8080";async function a(e){let t=await fetch("".concat(r,"/createPoll"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...e,createdBy:o.x.getUserId()})});if(!t.ok)throw Error("Failed to create poll");return await t.json()}async function l(e){let t=await fetch("".concat(r,"/getPoll/").concat(e,"/").concat(o.x.getUserId()),{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw Error("Failed to create poll");return await t.json()}async function n(e){let t=await fetch("".concat(r,"/getPollResults/").concat(e),{method:"GET",headers:{"Content-Type":"application/json"}});return await t.json()}async function i(){let e=await fetch("".concat(r,"/getPolls/").concat(o.x.getUserId()),{method:"GET",headers:{"Content-Type":"application/json"}});if(!e.ok)throw Error("Failed to create poll");return await e.json()}async function c(e){let t=await fetch("".concat(r,"/submitPoll/").concat(o.x.getUserId()),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw Error("Failed to submit poll");return await t.json()}},8350:(e,t,s)=>{"use strict";s.d(t,{x:()=>o});let o={getUserId(){let e=localStorage.getItem("poll_user_id");return e||(e=crypto.randomUUID(),localStorage.setItem("poll_user_id",e)),e},hasCreatedPolls:()=>"true"===localStorage.getItem("hasCreatedPolls"),setHasCreatedPolls(){localStorage.setItem("hasCreatedPolls","true")},clearHasCreatedPolls(){localStorage.removeItem("hasCreatedPolls")}}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,684,358],()=>t(1214)),_N_E=e.O()}]);